# emes

### 需求文档

#### 部门管理

##### 字段

1. 部门编号：支持唯一生成，生成规则为 a-z 小写字母随机 4 位唯一即可（需要有一个生成接口用来单独调用），
2. 部门名称：
3. 部门负责人：从用户表关联即可
4. 创建时间

##### 需求

1. 获取部门信息接口：返回部门信息+部门内用户信息，部门负责人放在第一个位置，后续按照创建时间 desc 返回
2. 新增/编辑部门接口：部门名称+部门编号（唯一，可自动生成）+部门负责人（可为空）

#### 用户管理

##### 字段

1. 姓名：
2. 性别：直接存男或女即可
3. 手机号：需要唯一
4. 所属部门：关联部门 id 即可
5. 所属角色：直接关联角色名就行
6. 登录密码：初始密码为 888888

##### 需求

1. 用户登录接口：支持姓名或者手机号+密码登录
2. 密码修改接口：登录 token+原密码+新密码+新密码确认
3. 密码重置接口：前端会判断只有管理员才可以操作（后端看情况增加调用接口的 token 是否是管理员的校验）
4. 新建/编辑用户接口：姓名（必填）+性别+手机号（必填）+所属部门+角色
5. 个人信息修改接口：登录 token+姓名+手机号（都是必填）

#### 角色与权限

##### 字段

1. permission_name: “系统管理员”，“部门负责人”
2. permission_code: “ADMIN”，“LEADER”

##### 需求

1. 初始设置角色为“系统管理员”，“部门负责人”。
2. 初始权限有

- “部门新增”（DEPARTMENT_ADD）
- “部门编辑”（DEPARTMENT_EDIT）
- “用户编辑”（USER_EDIT）
- “重置密码”（RESET_PASSWORD）

3. 新增角色接口：直接存储用户输入的角色名称（需唯一性判断）
4. 获取当前角色下用户列表+当前角色所拥有的权限列表接口：参数是角色名称
5. 设置当前角色下用户
6. 设置当前角色下拥有的权限
